var ni=Object.defineProperty;var ri=(s,t,e)=>t in s?ni(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var it=(s,t,e)=>(ri(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rt=window,jt=rt.ShadowRoot&&(rt.ShadyCSS===void 0||rt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,It=Symbol(),Ft=new WeakMap;let be=class{constructor(t,e,i){if(this._$cssResult$=!0,i!==It)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(jt&&t===void 0){const i=e!==void 0&&e.length===1;i&&(t=Ft.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&Ft.set(e,t))}return t}toString(){return this.cssText}};const oi=s=>new be(typeof s=="string"?s:s+"",void 0,It),ai=(s,...t)=>{const e=s.length===1?s[0]:t.reduce((i,n,r)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+s[r+1],s[0]);return new be(e,s,It)},li=(s,t)=>{jt?s.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):t.forEach(e=>{const i=document.createElement("style"),n=rt.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=e.cssText,s.appendChild(i)})},Wt=jt?s=>s:s=>s instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return oi(e)})(s):s;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var pt;const at=window,Jt=at.trustedTypes,ci=Jt?Jt.emptyScript:"",Qt=at.reactiveElementPolyfillSupport,St={toAttribute(s,t){switch(t){case Boolean:s=s?ci:null;break;case Object:case Array:s=s==null?s:JSON.stringify(s)}return s},fromAttribute(s,t){let e=s;switch(t){case Boolean:e=s!==null;break;case Number:e=s===null?null:Number(s);break;case Object:case Array:try{e=JSON.parse(s)}catch{e=null}}return e}},xe=(s,t)=>t!==s&&(t==t||s==s),ft={attribute:!0,type:String,converter:St,reflect:!1,hasChanged:xe},$t="finalized";let L=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;this.finalize(),((e=this.h)!==null&&e!==void 0?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach((e,i)=>{const n=this._$Ep(i,e);n!==void 0&&(this._$Ev.set(n,i),t.push(n))}),t}static createProperty(t,e=ft){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i=typeof t=="symbol"?Symbol():"__"+t,n=this.getPropertyDescriptor(t,i,e);n!==void 0&&Object.defineProperty(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(n){const r=this[t];this[e]=n,this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||ft}static finalize(){if(this.hasOwnProperty($t))return!1;this[$t]=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),t.h!==void 0&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,i=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of i)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const n of i)e.unshift(Wt(n))}else t!==void 0&&e.push(Wt(t));return e}static _$Ep(t,e){const i=e.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(t=this.constructor.h)===null||t===void 0||t.forEach(e=>e(this))}addController(t){var e,i;((e=this._$ES)!==null&&e!==void 0?e:this._$ES=[]).push(t),this.renderRoot!==void 0&&this.isConnected&&((i=t.hostConnected)===null||i===void 0||i.call(t))}removeController(t){var e;(e=this._$ES)===null||e===void 0||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])})}createRenderRoot(){var t;const e=(t=this.shadowRoot)!==null&&t!==void 0?t:this.attachShadow(this.constructor.shadowRootOptions);return li(e,this.constructor.elementStyles),e}connectedCallback(){var t;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$ES)===null||t===void 0||t.forEach(e=>{var i;return(i=e.hostConnected)===null||i===void 0?void 0:i.call(e)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$ES)===null||t===void 0||t.forEach(e=>{var i;return(i=e.hostDisconnected)===null||i===void 0?void 0:i.call(e)})}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EO(t,e,i=ft){var n;const r=this.constructor._$Ep(t,i);if(r!==void 0&&i.reflect===!0){const o=(((n=i.converter)===null||n===void 0?void 0:n.toAttribute)!==void 0?i.converter:St).toAttribute(e,i.type);this._$El=t,o==null?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}_$AK(t,e){var i;const n=this.constructor,r=n._$Ev.get(t);if(r!==void 0&&this._$El!==r){const o=n.getPropertyOptions(r),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((i=o.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?o.converter:St;this._$El=r,this[r]=a.fromAttribute(e,o.type),this._$El=null}}requestUpdate(t,e,i){let n=!0;t!==void 0&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||xe)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),i.reflect===!0&&this._$El!==t&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(t,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((n,r)=>this[r]=n),this._$Ei=void 0);let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(t=this._$ES)===null||t===void 0||t.forEach(n=>{var r;return(r=n.hostUpdate)===null||r===void 0?void 0:r.call(n)}),this.update(i)):this._$Ek()}catch(n){throw e=!1,this._$Ek(),n}e&&this._$AE(i)}willUpdate(t){}_$AE(t){var e;(e=this._$ES)===null||e===void 0||e.forEach(i=>{var n;return(n=i.hostUpdated)===null||n===void 0?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){this._$EC!==void 0&&(this._$EC.forEach((e,i)=>this._$EO(i,this[i],e)),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}};L[$t]=!0,L.elementProperties=new Map,L.elementStyles=[],L.shadowRootOptions={mode:"open"},Qt==null||Qt({ReactiveElement:L}),((pt=at.reactiveElementVersions)!==null&&pt!==void 0?pt:at.reactiveElementVersions=[]).push("1.6.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var mt;const lt=window,D=lt.trustedTypes,Kt=D?D.createPolicy("lit-html",{createHTML:s=>s}):void 0,At="$lit$",U=`lit$${(Math.random()+"").slice(9)}$`,we="?"+U,di=`<${we}>`,j=document,G=()=>j.createComment(""),Y=s=>s===null||typeof s!="object"&&typeof s!="function",Se=Array.isArray,hi=s=>Se(s)||typeof(s==null?void 0:s[Symbol.iterator])=="function",_t=`[ 	
\f\r]`,W=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Gt=/-->/g,Yt=/>/g,R=RegExp(`>|${_t}(?:([^\\s"'>=/]+)(${_t}*=${_t}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Zt=/'/g,Xt=/"/g,$e=/^(?:script|style|textarea|title)$/i,ui=s=>(t,...e)=>({_$litType$:s,strings:t,values:e}),B=ui(1),H=Symbol.for("lit-noChange"),S=Symbol.for("lit-nothing"),te=new WeakMap,V=j.createTreeWalker(j,129,null,!1),pi=(s,t)=>{const e=s.length-1,i=[];let n,r=t===2?"<svg>":"",o=W;for(let l=0;l<e;l++){const d=s[l];let h,c,u=-1,f=0;for(;f<d.length&&(o.lastIndex=f,c=o.exec(d),c!==null);)f=o.lastIndex,o===W?c[1]==="!--"?o=Gt:c[1]!==void 0?o=Yt:c[2]!==void 0?($e.test(c[2])&&(n=RegExp("</"+c[2],"g")),o=R):c[3]!==void 0&&(o=R):o===R?c[0]===">"?(o=n??W,u=-1):c[1]===void 0?u=-2:(u=o.lastIndex-c[2].length,h=c[1],o=c[3]===void 0?R:c[3]==='"'?Xt:Zt):o===Xt||o===Zt?o=R:o===Gt||o===Yt?o=W:(o=R,n=void 0);const m=o===R&&s[l+1].startsWith("/>")?" ":"";r+=o===W?d+di:u>=0?(i.push(h),d.slice(0,u)+At+d.slice(u)+U+m):d+U+(u===-2?(i.push(void 0),l):m)}const a=r+(s[e]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(s)||!s.hasOwnProperty("raw"))throw Error("invalid template strings array");return[Kt!==void 0?Kt.createHTML(a):a,i]};let Ct=class Ae{constructor({strings:t,_$litType$:e},i){let n;this.parts=[];let r=0,o=0;const a=t.length-1,l=this.parts,[d,h]=pi(t,e);if(this.el=Ae.createElement(d,i),V.currentNode=this.el.content,e===2){const c=this.el.content,u=c.firstChild;u.remove(),c.append(...u.childNodes)}for(;(n=V.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes()){const c=[];for(const u of n.getAttributeNames())if(u.endsWith(At)||u.startsWith(U)){const f=h[o++];if(c.push(u),f!==void 0){const m=n.getAttribute(f.toLowerCase()+At).split(U),p=/([.?@])?(.*)/.exec(f);l.push({type:1,index:r,name:p[2],strings:m,ctor:p[1]==="."?mi:p[1]==="?"?gi:p[1]==="@"?yi:ht})}else l.push({type:6,index:r})}for(const u of c)n.removeAttribute(u)}if($e.test(n.tagName)){const c=n.textContent.split(U),u=c.length-1;if(u>0){n.textContent=D?D.emptyScript:"";for(let f=0;f<u;f++)n.append(c[f],G()),V.nextNode(),l.push({type:2,index:++r});n.append(c[u],G())}}}else if(n.nodeType===8)if(n.data===we)l.push({type:2,index:r});else{let c=-1;for(;(c=n.data.indexOf(U,c+1))!==-1;)l.push({type:7,index:r}),c+=U.length-1}r++}}static createElement(t,e){const i=j.createElement("template");return i.innerHTML=t,i}};function F(s,t,e=s,i){var n,r,o,a;if(t===H)return t;let l=i!==void 0?(n=e._$Co)===null||n===void 0?void 0:n[i]:e._$Cl;const d=Y(t)?void 0:t._$litDirective$;return(l==null?void 0:l.constructor)!==d&&((r=l==null?void 0:l._$AO)===null||r===void 0||r.call(l,!1),d===void 0?l=void 0:(l=new d(s),l._$AT(s,e,i)),i!==void 0?((o=(a=e)._$Co)!==null&&o!==void 0?o:a._$Co=[])[i]=l:e._$Cl=l),l!==void 0&&(t=F(s,l._$AS(s,t.values),l,i)),t}let fi=class{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;const{el:{content:i},parts:n}=this._$AD,r=((e=t==null?void 0:t.creationScope)!==null&&e!==void 0?e:j).importNode(i,!0);V.currentNode=r;let o=V.nextNode(),a=0,l=0,d=n[0];for(;d!==void 0;){if(a===d.index){let h;d.type===2?h=new zt(o,o.nextSibling,this,t):d.type===1?h=new d.ctor(o,d.name,d.strings,this,t):d.type===6&&(h=new vi(o,this,t)),this._$AV.push(h),d=n[++l]}a!==(d==null?void 0:d.index)&&(o=V.nextNode(),a++)}return V.currentNode=j,r}v(t){let e=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}},zt=class Ce{constructor(t,e,i,n){var r;this.type=2,this._$AH=S,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$Cp=(r=n==null?void 0:n.isConnected)===null||r===void 0||r}get _$AU(){var t,e;return(e=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&e!==void 0?e:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return e!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=F(this,t,e),Y(t)?t===S||t==null||t===""?(this._$AH!==S&&this._$AR(),this._$AH=S):t!==this._$AH&&t!==H&&this._(t):t._$litType$!==void 0?this.g(t):t.nodeType!==void 0?this.$(t):hi(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==S&&Y(this._$AH)?this._$AA.nextSibling.data=t:this.$(j.createTextNode(t)),this._$AH=t}g(t){var e;const{values:i,_$litType$:n}=t,r=typeof n=="number"?this._$AC(t):(n.el===void 0&&(n.el=Ct.createElement(n.h,this.options)),n);if(((e=this._$AH)===null||e===void 0?void 0:e._$AD)===r)this._$AH.v(i);else{const o=new fi(r,this),a=o.u(this.options);o.v(i),this.$(a),this._$AH=o}}_$AC(t){let e=te.get(t.strings);return e===void 0&&te.set(t.strings,e=new Ct(t)),e}T(t){Se(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,n=0;for(const r of t)n===e.length?e.push(i=new Ce(this.k(G()),this.k(G()),this,this.options)):i=e[n],i._$AI(r),n++;n<e.length&&(this._$AR(i&&i._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,e);t&&t!==this._$AB;){const n=t.nextSibling;t.remove(),t=n}}setConnected(t){var e;this._$AM===void 0&&(this._$Cp=t,(e=this._$AP)===null||e===void 0||e.call(this,t))}},ht=class{constructor(t,e,i,n,r){this.type=1,this._$AH=S,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=S}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,n){const r=this.strings;let o=!1;if(r===void 0)t=F(this,t,e,0),o=!Y(t)||t!==this._$AH&&t!==H,o&&(this._$AH=t);else{const a=t;let l,d;for(t=r[0],l=0;l<r.length-1;l++)d=F(this,a[i+l],e,l),d===H&&(d=this._$AH[l]),o||(o=!Y(d)||d!==this._$AH[l]),d===S?t=S:t!==S&&(t+=(d??"")+r[l+1]),this._$AH[l]=d}o&&!n&&this.j(t)}j(t){t===S?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},mi=class extends ht{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===S?void 0:t}};const _i=D?D.emptyScript:"";let gi=class extends ht{constructor(){super(...arguments),this.type=4}j(t){t&&t!==S?this.element.setAttribute(this.name,_i):this.element.removeAttribute(this.name)}},yi=class extends ht{constructor(t,e,i,n,r){super(t,e,i,n,r),this.type=5}_$AI(t,e=this){var i;if((t=(i=F(this,t,e,0))!==null&&i!==void 0?i:S)===H)return;const n=this._$AH,r=t===S&&n!==S||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,o=t!==S&&(n===S||r);r&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;typeof this._$AH=="function"?this._$AH.call((i=(e=this.options)===null||e===void 0?void 0:e.host)!==null&&i!==void 0?i:this.element,t):this._$AH.handleEvent(t)}},vi=class{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){F(this,t)}};const ee=lt.litHtmlPolyfillSupport;ee==null||ee(Ct,zt),((mt=lt.litHtmlVersions)!==null&&mt!==void 0?mt:lt.litHtmlVersions=[]).push("2.7.4");const bi=(s,t,e)=>{var i,n;const r=(i=e==null?void 0:e.renderBefore)!==null&&i!==void 0?i:t;let o=r._$litPart$;if(o===void 0){const a=(n=e==null?void 0:e.renderBefore)!==null&&n!==void 0?n:null;r._$litPart$=o=new zt(t.insertBefore(G(),a),a,void 0,e??{})}return o._$AI(s),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var gt,yt;let J=class extends L{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return(t=(e=this.renderOptions).renderBefore)!==null&&t!==void 0||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=bi(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!1)}render(){return H}};J.finalized=!0,J._$litElement$=!0,(gt=globalThis.litElementHydrateSupport)===null||gt===void 0||gt.call(globalThis,{LitElement:J});const ie=globalThis.litElementPolyfillSupport;ie==null||ie({LitElement:J});((yt=globalThis.litElementVersions)!==null&&yt!==void 0?yt:globalThis.litElementVersions=[]).push("3.3.2");function se(s,t=[]){do{const e=s&127;s>>>=7,t.push(e|(s===0?0:128))}while(s>0);return t}function Pe(s,t=0){let e=t,i=(s[t]&127)<<0;return 128&s[t++]&&(i|=(s[t]&127)<<7,128&s[t++]&&(i|=(s[t]&127)<<14,128&s[t++]&&(i|=(s[t]&127)<<21))),[i,t,e]}const Ee=xi();function xi(){let s=new Map,t=[[1,"u8","payload_format_indicator"],[2,"u32","message_expiry_interval"],[3,"utf8","content_type"],[8,"utf8","response_topic"],[9,"bin","correlation_data"],[11,"vint","subscription_identifier"],[17,"u32","session_expiry_interval"],[18,"utf8","assigned_client_identifier"],[19,"u16","server_keep_alive"],[21,"utf8","authentication_method"],[22,"bin","authentication_data"],[23,"u8","request_problem_information"],[24,"u32","will_delay_interval"],[25,"u8","request_response_information"],[26,"utf8","response_information"],[28,"utf8","server_reference"],[31,"utf8","reason_string"],[33,"u16","receive_maximum"],[34,"u16","topic_alias_maximum"],[35,"u16","topic_alias"],[36,"u8","maximum_qos"],[37,"u8","retain_available"],[38,"pair","user_properties",{op:"kv_obj"}],[39,"u32","maximum_packet_size"],[40,"u8","wildcard_subscription_available"],[41,"u8","subscription_identifiers_available",{op:"u8_vec"}],[42,"u8","shared_subscription_available"]];for(let[e,i,n,r]of t){let o={id:e,type:i,name:n,...r};s.set(o.id,o),s.set(o.name,o)}return s}class wi extends Number{static of(t,e,i){var r;let n=new this(t);return n.reason=((r=i==null?void 0:i[e])==null?void 0:r.get(t))||e,n}}class Si{static of(t){return this.prototype.of(t)}of(t){let e=(i,n)=>(n=0|e.k,e.k=n+i,n);return{__proto__:this,buf:t,step:e}}has_more(){return this.buf.byteLength>(this.step.k|0)}u8(){return this.buf[this.step(1)]}u16(){let{buf:t,step:e}=this,i=e(2);return t[i]<<8|t[i+1]}u32(){let{buf:t,step:e}=this,i=e(4);return t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]}vint(){let{buf:t,step:e}=this,[i,n,r]=Pe(t,e.k|0);return e(n-r),i}bin(){let{buf:t,step:e}=this,i=e(2),n=t[i]<<8|t[i+1];return i=e(n),t.subarray(i,i+n)}utf8(){return new TextDecoder("utf-8").decode(this.bin())}pair(){return[this.utf8(),this.utf8()]}flags(t){return new t(this.buf[this.step(1)])}reason(t){let e=this.buf[this.step(1)];if(e!=null)return wi.of(e,t,this._reasons_by)}flush(){let{buf:t,step:e}=this;return this.step=this.buf=null,t.subarray(e.k|0)}}class $i extends Si{props(){let{buf:t,step:e}=this,[i,n,r]=Pe(t,e.k|0);if(e(i+n-r),i===0)return null;let o={},a=this.of(t.subarray(n,e.k|0));for(;a.has_more();){let l=Ee.get(a.u8()),d=a[l.type]();o[l.name]=l.op?a[l.op](o[l.name],d):d}return o}kv_obj(t=Object.create(null),[e,i]){return t[e]=i,t}u8_vec(t=[],e){return t.push(e),t}}function Ai(s,...t){s=class extends s{static reasons(e,...i){var o;let n=this.prototype;n._reasons_by={...n._reasons_by};let r=(o=n._reasons_by)[e]||(o[e]=new Map);for(let[a,l]of i)r.set(a,l);return this}};for(let e of t)e(s);return s}class Ci{static of(){return this.prototype.of()}of(){return{__proto__:this,$:[]}}static init(){return this}as_pkt(t){return this.pack([t])}push(...t){this.$.push(...t)}pack(t){let e,i,n=0,r=this.$;this.$=!1;for(e of r)n+=e.length;t=se(n,t),i=t.length;let o=new Uint8Array(i+n);o.set(t,0);for(e of r)o.set(e,i),i+=e.length;return o}u8(t){this.push([t&255])}u16(t){this.push([t>>>8&255,t&255])}u32(t){this.push([t>>>24&255,t>>>16&255,t>>>8&255,t&255])}vint(t){this.push(se(t))}bin(t){if(!t)return this.u16(0);if(typeof t=="string")return this.utf8(t);t.length!==t.byteLength&&(t=new Uint8Array(t)),this.u16(t.byteLength),this.push(t)}utf8(t){let e=new TextEncoder("utf-8").encode(t);this.u16(e.byteLength),this.push(e)}pair(t,e){this.utf8(t),this.utf8(e)}flags(t,e,i=0){return t!==void 0&&isNaN(+t)&&(t=e(t,0)),t|=i,this.push([t]),t}reason(t){this.push([t|0])}flush(t){t!=null&&this.push(typeof t=="string"?new TextEncoder("utf-8").encode(t):t),this.push=!1}}class Pi extends Ci{props(t){if(!t)return this.u8(0);if(Array.isArray(t)||(t=t.entries?Array.from(t.entries()):Object.entries(t)),t.length===0)return this.u8(0);let e=this.of();for(let[i,n]of t){let r=Ee.get(i);e[r.op||"one"](n,r)}this.push(e.pack())}one(t,e){this.u8(e.id),this[e.type](t)}kv_obj(t,e){for(let i of Object.entries(t))this.u8(e.id),this.pair(i)}u8_vec(t,e){for(let i of t)this.u8(e.id),this.u8(i)}}function Ei(s,t){class e extends Number{get session_present(){return this&!0}}return s[2]=(i,n)=>{let r=t.of(n);return i.flags=r.flags(e),i.reason=r.reason(i.type),5<=i.mqtt_level&&(i.props=r.props()),i}}function Ti(s){s.reasons("connack",[0,"Success"],[1,"Connection refused, unacceptable protocol version"],[2,"Connection refused, identifier rejected"],[3,"Connection refused, server unavailable"],[4,"Connection refused, bad user name or password"],[5,"Connection refused, not authorized"])}function Ni(s){Ti(s),s.reasons("connack",[129,"Malformed Packet"],[130,"Protocol Error"],[131,"Implementation specific error"],[132,"Unsupported Protocol Version"],[133,"Client Identifier not valid"],[134,"Bad User Name or Password"],[135,"Not authorized"],[136,"Server unavailable"],[137,"Server busy"],[138,"Banned"],[140,"Bad authentication method"],[144,"Topic Name invalid"],[149,"Packet too large"],[151,"Quota exceeded"],[153,"Payload format invalid"],[154,"Retain not supported"],[155,"QoS not supported"],[156,"Use another server"],[157,"Server moved"],[159,"Connection rate exceeded"])}function ki(s,t){return s[3]=(e,i)=>{let{hdr:n}=e;e.dup=!!(n&8),e.retain=!!(n&1);let r=e.qos=n>>1&3,o=t.of(i);return e.topic=o.utf8(),r!==0&&(e.pkt_id=o.u16()),5<=e.mqtt_level&&(e.props=o.props()),e.payload=o.flush(),e}}function qi(s,t){return s[4]=(e,i)=>{let n=t.of(i);return e.pkt_id=n.u16(),5<=e.mqtt_level&&(e.reason=n.reason(e.type),e.props=n.props()),e}}function Ui(s){s.reasons("puback",[0,"Success"],[16,"No matching subscribers"],[128,"Unspecified error"],[131,"Implementation specific error"],[135,"Not authorized"],[144,"Topic Name invalid"],[145,"Packet identifier in use"],[151,"Quota exceeded"],[153,"Payload format invalid"])}function Te(s){return(t,e)=>{let i=s.of(e);t.pkt_id=i.u16(),5<=t.mqtt_level&&(t.props=i.props());let n=t.answers=[];for(;i.has_more();)n.push(i.reason(t.type));return t}}function Mi(s,t){return s[9]=Te(t)}function Oi(s){s.reasons("suback",[0,"Granted QoS 0"],[1,"Granted QoS 1"],[2,"Granted QoS 2"])}function Ri(s){Oi(s),s.reasons("suback",[128,"Unspecified error"],[131,"Implementation specific error"],[135,"Not authorized"],[143,"Topic Filter invalid"],[145,"Packet Identifier in use"],[151,"Quota exceeded"],[158,"Shared Subscriptions not supported"],[161,"Subscription Identifiers not supported"],[162,"Wildcard Subscriptions not supported"])}function Bi(s,t){return s[11]=Te(t)}function Vi(s){s.reasons("unsuback",[0,"Success"],[17,"No subscription existed"],[128,"Unspecified error"],[131,"Implementation specific error"],[135,"Not authorized"],[143,"Topic Filter invalid"],[145,"Packet Identifier in use"])}function ji(s){return s[12]=s[13]=t=>t}function Ii(s,t){return s[14]=(e,i)=>{if(i&&5<=e.mqtt_level){let n=t.of(i);e.reason=n.reason(e.type),e.props=n.props()}return e}}function zi(s){s.reasons("disconnect",[0,"Normal disconnection"],[4,"Disconnect with Will Message"],[128,"Unspecified error"],[129,"Malformed Packet"],[130,"Protocol Error"],[131,"Implementation specific error"],[135,"Not authorized"],[137,"Server busy"],[139,"Server shutting down"],[141,"Keep Alive timeout"],[142,"Session taken over"],[143,"Topic Filter invalid"],[144,"Topic Name invalid"],[147,"Receive Maximum exceeded"],[148,"Topic Alias invalid"],[149,"Packet too large"],[150,"Message rate too high"],[151,"Quota exceeded"],[152,"Administrative action"],[153,"Payload format invalid"],[154,"Retain not supported"],[155,"QoS not supported"],[156,"Use another server"],[157,"Server moved"],[158,"Shared Subscriptions not supported"],[159,"Connection rate exceeded"],[160,"Maximum connect time"],[161,"Subscription Identifiers not supported"],[162,"Wildcard Subscriptions not supported"])}function Li(s,t){return s[15]=(e,i)=>{if(5<=e.mqtt_level){let n=t.of(i);e.reason=n.reason(e.type),e.props=n.props()}return e}}function Di(s){s.reasons("auth",[0,"Success"],[24,"Continue authentication"],[25,"Re-authenticate"])}function Hi(s,t){const e=new Uint8Array([0,4,77,81,84,84]),i=r=>0|(r.reserved?1:0)|(r.will_qos&3)<<3|(r.clean_start?2:0)|(r.will_flag?4:0)|(r.will_retain?32:0)|(r.password?64:0)|(r.username?128:0),n=r=>4|(r.qos&3)<<3|(r.retain?32:0);return s.connect=(r,o)=>{let a=t.of(o);a.push(e),a.u8(r);let{will:l,username:d,password:h}=o,c=a.flags(o.flags,i,0|(d?128:0)|(h?64:0)|(l?n(l):0));return a.u16(o.keep_alive),5<=r&&a.props(o.props),a.utf8(o.client_id),c&4&&(5<=r&&a.props(l.props),a.utf8(l.topic),a.bin(l.payload)),c&128&&a.utf8(d),c&64&&a.bin(h),a.as_pkt(16)}}function Fi(s,t){return s.publish=(e,i)=>{let n=(i.qos&3)<<1,r=t.of(i);return r.utf8(i.topic),n!==0&&r.u16(i.pkt_id),5<=e&&r.props(i.props),r.flush(i.payload),r.as_pkt(48|n|(i.dup?8:0)|(i.retain?1:0))}}function Wi(s,t){return s.puback=(e,i)=>{let n=t.of(i);return n.u16(i.pkt_id),5<=e&&(n.reason(i.reason),n.props(i.props)),n.as_pkt(64)}}function Ji(s,t){const e=i=>0|i.qos&3|(i.retain?4:0)|(i.retain_handling&3)<<2;return s.subscribe=(i,n)=>{let r=t.of(n);r.u16(n.pkt_id),5<=i&&r.props(n.props);let o=e(n);for(let a of n.topics)if(typeof a=="string")r.utf8(a),r.u8(o);else{let[l,d]=Array.isArray(a)?a:[a.topic,a.opts];r.utf8(l),d===void 0?r.u8(o):r.flags(d,e)}return r.as_pkt(130)}}function Qi(s,t){return s.unsubscribe=(e,i)=>{let n=t.of(i);n.u16(i.pkt_id),5<=e&&n.props(i.props);for(let r of i.topics)n.utf8(r);return n.as_pkt(162)}}function Ki(s){s.pingreq=()=>new Uint8Array([192,0]),s.pingresp=()=>new Uint8Array([208,0])}function Gi(s,t){return s.disconnect=(e,i)=>{let n=t.of(i);return i&&5<=e&&(i.reason||i.props)&&(n.reason(i.reason),n.props(i.props)),n.as_pkt(224)}}function Yi(s,t){return s.auth=(e,i)=>{if(5>e)throw new Error("Auth packets are only available after MQTT 5.x");let n=t.of(i);return n.reason(i.reason),n.props(i.props),n.as_pkt(240)}}const Zi=[Ei,ki,qi,Mi,Bi,ji,Ii,Li],Xi=[Hi,Wi,Fi,Ji,Qi,Ki,Gi,Yi],ts=Ai($i,Ni,Ui,Ri,Vi,zi,Di),es={decode_fns:Zi,mqtt_reader:ts,encode_fns:Xi,mqtt_writer:Pi};function is(s,t=0){let e=t,i=(s[t]&127)<<0;return 128&s[t++]&&(i|=(s[t]&127)<<7,128&s[t++]&&(i|=(s[t]&127)<<14,128&s[t++]&&(i|=(s[t]&127)<<21))),[i,t,e]}function ss(s){let t=new Uint8Array(0);return e=>{t=t.byteLength===0?e:ns(t,e);let i=[];for(;;){let[n,r]=is(t,1),o=n+r;if(t.byteLength<o)return i;let a=t[0],l=n===0?null:t.subarray(r,o);t=t.subarray(o);let d=s.decode_pkt(a,l,s);d!=null&&i.push(d)}}}function ns(s,t){let e=s.byteLength,i=new Uint8Array(e+t.byteLength);return i.set(s,0),i.set(t,e),i}const rs=["~","connect","connack","publish","puback","pubrec","pubrel","pubcomp","subscribe","suback","unsubscribe","unsuback","pingreq","pingresp","disconnect","auth"];function os(s,t,e){e={__proto__:e||t.pkt_ctx,mqtt_level:s,get hdr(){return this.b0&15},get id(){return this.b0>>>4},get type(){return rs[this.b0>>>4]}};let i,n=[],r={};for(i of t.encode_fns)i(r,t.mqtt_writer);for(i of t.decode_fns)i(n,t.mqtt_reader);return{pkt_ctx:e,encode_pkt(o,a){return r[o](s,a)},decode_pkt(o,a){let l=n[o>>>4]||n[0];return l==null?void 0:l({__proto__:this.pkt_ctx,b0:o},a)},mqtt_stream(){let o={__proto__:this,pkt_ctx:{__proto__:e}};return o.pkt_ctx._base_=o.pkt_ctx,o.decode=ss(o),o}}}function as(s=(...t)=>t){let t,e,i=(n,r)=>{t=n,e=r};return n=>(n=new Promise(i),s(n,t,e))}const st=as();Promise.resolve({type:"init"});function ls(s,[t,e]){let i=st(),n=st(),r=async(...l)=>(await n[0])(...l),o,a;return s._send=r,{async when_ready(){await n[0]},ping:cs(()=>o==null?void 0:o("pingreq")),reset(l){o&&(l&&i[2](l),o=null,i=st(),s._send=r,s.conn_emit("on_disconnect",l===!1,l))},async send_connect(...l){o||await i[0];let d=await o(...l);return d[0].reason==0&&(a=!0,n[1](s._send=o),n=st(),s.conn_emit("on_ready")),d},is_set:()=>!!o,set(l,d){if(o)throw new Error("Already connected");l=l.mqtt_stream();let h={mqtt:s},c=u=>t(l.decode(u),h);return o=async(u,f,m)=>{let p=m!==void 0?e(m):!0;return await d(l.encode_pkt(u,f)),p},i[1](o),s.conn_emit("on_live",a),c}}}function cs(s){let t;return e=>{var i;if(t=clearInterval(t),e)return t=setInterval(s,1e3*e),(i=t.unref)==null||i.call(t),!0}}function ds(s,t){if(s instanceof RegExp)return{keys:!1,pattern:s};var e,i,n,r,o=[],a="",l=s.split("/");for(l[0]||l.shift();n=l.shift();)e=n[0],e==="*"?(o.push("wild"),a+="/(.*)"):e===":"?(i=n.indexOf("?",1),r=n.indexOf(".",1),o.push(n.substring(1,~i?i:~r?r:n.length)),a+=~i&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(a+=(~i?"?":"")+"\\"+n.substring(r))):a+="/"+n;return{keys:o,pattern:new RegExp("^"+a+(t?"(?=$|/)":"/?$"),"i")}}function hs(s,t,e){e.done=!0}function us(){let s=[[],[]],t=Symbol(),e=i=>ps(s,i);return{find:e,add(i,...n){let r=n.pop(),o=n.pop();if(typeof r!="function")if(r===!1)r=hs;else throw new TypeError;let a=ds(i.replace(/[+#]$/,"*"));return a.key=i,a.tgt=r,s[o?0:1].push(a),this},remove(i,n){let r=s[n?0:1];return ne([r],i)},clear(i){s[i?0:1]=[],i==null&&(s[1]=[])},async invoke(i,n){n.idx=0,n.rm=t;for(let[a,l]of e(i.topic)){let d=await a(i,l,n);if(t===d&&ne(s,a),n.done)break;n.idx++}let{pkt_id:r,qos:o}=i;o===1&&await n.mqtt._send("puback",{pkt_id:r})}}}function*ps(s,t){for(let e of s)for(let i of e){let n=fs(t,i);n!==void 0&&(yield n)}}function fs(s,{keys:t,pattern:e,tgt:i}){let n=s[0]!=="/"?e.exec("/"+s):e.exec(s);if(n===null)return;if(t===!1){let{groups:o}=n;if(!o)return[i];let a={};for(let l in o)a[l]=o[l];return[i,a]}if(t.length===0)return[i];let r={};for(let o=0;o<t.length;o++)r[t[o]]=n[1+o];return[i,r]}function ne(s,t){let e=i=>i===t||i.tgt===t||i.key===t;for(let i of s){let n=i.findIndex(e);if(0<=n)return!!i.splice(n,1)}return!1}const ms={create(s){return{__proto__:this,target:s,hashbelt:[new Map]}},bind_pkt_future(s=100){let{hashbelt:t}=this,e,i=n=>t[0].set(e,n);return n=>(typeof n=="string"?e=n:(s=s+1&65535,e=n.pkt_id=s),new Promise(i))},answer(s,t){for(let e of this.hashbelt){let i=e.get(s);if(i!==void 0)return e.delete(s),i([t]),!0}return!1},rotate_belt(s){let{hashbelt:t}=this;t.unshift(new Map);for(let e of t.splice(s||5))for(let i of e.values())i([,"expired"])},cmdids:(()=>{return[()=>{},e,t,e,s,s,s,s,e,s,e,s,t,t,e,t];function s(i,n){i.answer(n.pkt_id,n)}function t(i,n,r){i.answer(n.type,n),e(i,n,r)}async function e({target:i},n,r){let o=i[`mqtt_${n.type}`]||i.mqtt_pkt;o!==void 0&&await o.call(i,n,r)}})()};function _s(s,t){let e=ms.create(t),{cmdids:i}=e,{td:n=1e3,n:r=5}=s&&s.rotate||{},o=n+Date.now();return[a,e.bind_pkt_future()];function a(l,d){for(let h of l)i[h.id](e,h,d);Date.now()>o&&(e.rotate_belt(r),o=n+Date.now())}}class gs extends Error{constructor(t,e=t.reason){super(`[0x${e.toString(16)}] ${e.reason}`),this.mqtt_pkt=t,this.reason=e}}class Ne{constructor(t={}){this._conn_=ls(this,this._init_dispatch(t,this))}async conn_emit(t,e,i){var n;(n=this.log_conn)==null||n.call(this,t,e,i);try{let r=this[await t];r?await r.call(this,this,e,i):i&&await this.on_error(i,t)}catch(r){this.on_error(r,t)}}on_error(t,e){console.warn("[[u8-mqtt error: %s]]",e,t)}async connect(t={}){let e=t.client_id||["u8-mqtt--",""];Array.isArray(e)&&(t.client_id=e=this.init_client_id(e)),this.client_id=e,t.keep_alive==null&&(t.keep_alive=60);let i=await this._conn_.send_connect("connect",t,"connack");if(i[0].reason!=0)throw new this.MQTTError(i[0]);return this._conn_.ping(t.keep_alive),i}async disconnect(t={}){let e=await this._send("disconnect",t);return this._conn_.reset(!1),e}auth(t={}){return this._send("auth",t,"auth")}ping(){return this._send("pingreq",null,"pingresp")}subscribe(t,e){return t=re(t,e),this._send("subscribe",t,t)}_sub_chain(t,e){let i=this.subscribe([[t]],e),n=this.subs||(this.subs=new Map);return n.set(i.topic=t,n.last=i),this}unsubscribe(t,e){return t=re(t,e),this._send("unsubscribe",t,t)}get on_topic(){return this.router.add}subscribe_topic(t,...e){this.router.add(t,!0,e.pop());let i=this.topic_for(t);return this._sub_chain(i,e.pop())}unsubscribe_topic(t){this.router.remove(t,!0);let e=this.topic_for(t);return this.unsubscribe([[e]])}shared_subscribe(t,e,...i){this.router.add(e,!0,i.pop());let n=this.topic_for(e);return t!=null&&(n=`$share/${t}/${n}`),this._sub_chain(n,i.pop())}shared_unsubscribe(t,e){this.router.remove(e,!0);let i=this.topic_for(e);return t!=null&&(i=`$share/${t}/${i}`),this.unsubscribe([[i]])}topic_for(t){return t.replace(/[:*].*$/,"#")}publish(t,e){return w(this,t,e)}post(t,e,i){return w.m(this,t,e,i)}send(t,e,i){return w.mq(this,t,e,i)}store(t,e,i){return w.mqr(this,t,e,i)}json_post(t,e,i){return w.o(this,t,e,i)}json_send(t,e,i){return w.oq(this,t,e,i)}json_store(t,e,i){return w.oqr(this,t,e,i)}obj_post(t,e,i){return w.o(this,t,e,i)}obj_send(t,e,i){return w.oq(this,t,e,i)}obj_store(t,e,i){return w.oqr(this,t,e,i)}init_client_id(t){let e=this.client_id;return e===void 0&&(this.client_id=e=this.sess_client_id(t)),e}new_client_id(t){return[t[0],Math.random().toString(36).slice(2),t[1]].join("")}sess_client_id(t){let e=t.join(" "),i=sessionStorage.getItem(e);return i==null&&(i=this.new_client_id(t),sessionStorage.setItem(e,i)),i}_init_router(t){return this.router=us()}_init_dispatch(t){let e={__proto__:t.on_mqtt_type||{},router:this._init_router(t,this)};return e.mqtt_publish||(e.mqtt_publish=e.router.invoke),_s(this,e)}}{let s=Ne.prototype;Object.assign(s,{MQTTError:gs,pub:s.publish,sub:s.subscribe,unsub:s.unsubscribe,sub_topic:s.subscribe_topic,unsub_topic:s.unsubscribe_topic,shared_sub:s.shared_subscribe,shared_unsub:s.shared_unsubscribe})}function re(s,t){return typeof s=="string"?{topics:[s],...t}:s[Symbol.iterator]?{topics:[...s],...t}:t?{...s,...t}:s}async function w(s,t,e){if(t.payload===void 0){typeof e=="function"&&(e={fn_encode:e});let{msg:i}=t;switch(typeof i){case"function":e={...e,fn_encode:i};case"undefined":return r=>w(s,{...t,[t.arg||"payload"]:r},e);default:let{fn_encode:n}=e||{};t.payload=n?await n(i):JSON.stringify(i)}}return e&&(e.props&&(t.props=e.props),e.xform&&(t=e.xform(t)||t)),s._send("publish",t,t.qos?t:void 0)}Object.assign(w,{m:(s,t,e,i)=>w(s,{topic:t,payload:e,qos:0},i),mq:(s,t,e,i)=>w(s,{topic:t,payload:e,qos:1},i),mqr:(s,t,e,i)=>w(s,{topic:t,payload:e,qos:1,retain:1},i),o:(s,t,e,i)=>w(s,{topic:t,msg:e,arg:"msg",qos:0},i),oq:(s,t,e,i)=>w(s,{topic:t,msg:e,arg:"msg",qos:1},i),oqr:(s,t,e,i)=>w(s,{topic:t,msg:e,arg:"msg",qos:1,retain:1},i)});const ys={utf8(s){return new TextDecoder("utf-8").decode(s||this.payload)},json(s){return JSON.parse(this.utf8(s)||null)},text(s){return this.utf8(s)}};class vs extends Ne{constructor(t={}){super(t),this.with(t)}static mqtt_ctx(t,e,i=ys){let n=class extends this{};return n.prototype.mqtt_ctx=os(t,e,i),n}with(t){for(let[e,i]of Object.entries(t))typeof i=="function"&&(this[e]=i);return this}on_live(t,e){if(e)return t.connect()}_use_conn(t){var e;return(e=this.reconnect=t)==null?void 0:e()}with_autoreconnect(t=2e3){return t.toFixed&&(t={delay:t}),this.with({on_reconnect(){this.delay(t.delay||2e3).then(this.reconnect).then(t.reconnect,t.error)}})}on_disconnect(t,e){var i;if(!e)return(i=t.on_reconnect)==null?void 0:i.call(t)}delay(t){return new Promise(e=>setTimeout(e,t))}with_async_iter(t,e){let i=this._conn_.set(this.mqtt_ctx,e);return this._msg_loop=(async()=>{try{t=await t;for await(let n of t)i(n);this._conn_.reset()}catch(n){this._conn_.reset(n)}})(),this}with_stream(t,e){return e===void 0&&(e=t),this.with_async_iter(t,i=>e.write(i))}with_websock(t){if(!(t!=null&&t.send))return t=new URL(t||"ws://127.0.0.1:9001"),this._use_conn(()=>this.with_websock(new WebSocket(t,["mqtt"])));t.binaryType="arraybuffer";let e,{readyState:i}=t;if(i!==1){if(i!==0)throw new Error("Invalid WebSocket readyState");e=new Promise(o=>t.onopen=o)}let{_conn_:n}=this,r=n.set(this.mqtt_ctx,async o=>(await e,t.send(o)));return t.onmessage=o=>r(new Uint8Array(o.data)),t.onclose=o=>{if(!o.wasClean){var a=new Error("websocket connection close");a.code=o.code,a.reason=o.reason}n.reset(a)},this}}const bs=vs.mqtt_ctx(4,es),xs=s=>new bs(s);/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const oe=typeof window<"u"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,Pt=(s,t,e=null)=>{for(;t!==e;){const i=t.nextSibling;s.removeChild(t),t=i}},N=`{{lit-${String(Math.random()).slice(2)}}}`,ke=`<!--${N}-->`,ae=new RegExp(`${N}|${ke}`);let qe=class{constructor(t,e){this.parts=[],this.element=e;const i=[],n=[],r=document.createTreeWalker(e.content,133,null,!1);let o=0,a=-1,l=0;const{strings:d,values:{length:h}}=t;for(;l<h;){const c=r.nextNode();if(c!==null){if(a++,c.nodeType===1){if(c.hasAttributes()){const u=c.attributes,{length:f}=u;let m=0;for(let p=0;p<f;p++)le(u[p].name,"$lit$")&&m++;for(;m-- >0;){const p=d[l],_=Et.exec(p)[2],y=_.toLowerCase()+"$lit$",$=c.getAttribute(y);c.removeAttribute(y);const v=$.split(ae);this.parts.push({type:"attribute",index:a,name:_,strings:v}),l+=v.length-1}}c.tagName==="TEMPLATE"&&(n.push(c),r.currentNode=c.content)}else if(c.nodeType===3){const u=c.data;if(u.indexOf(N)>=0){const f=c.parentNode,m=u.split(ae),p=m.length-1;for(let _=0;_<p;_++){let y,$=m[_];if($==="")y=M();else{const v=Et.exec($);v!==null&&le(v[2],"$lit$")&&($=$.slice(0,v.index)+v[1]+v[2].slice(0,-5)+v[3]),y=document.createTextNode($)}f.insertBefore(y,c),this.parts.push({type:"node",index:++a})}m[p]===""?(f.insertBefore(M(),c),i.push(c)):c.data=m[p],l+=p}}else if(c.nodeType===8)if(c.data===N){const u=c.parentNode;c.previousSibling!==null&&a!==o||(a++,u.insertBefore(M(),c)),o=a,this.parts.push({type:"node",index:a}),c.nextSibling===null?c.data="":(i.push(c),a--),l++}else{let u=-1;for(;(u=c.data.indexOf(N,u+1))!==-1;)this.parts.push({type:"node",index:-1}),l++}}else r.currentNode=n.pop()}for(const c of i)c.parentNode.removeChild(c)}};const le=(s,t)=>{const e=s.length-t.length;return e>=0&&s.slice(e)===t},Ue=s=>s.index!==-1,M=()=>document.createComment(""),Et=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function ce(s,t){const{element:{content:e},parts:i}=s,n=document.createTreeWalker(e,133,null,!1);let r=Q(i),o=i[r],a=-1,l=0;const d=[];let h=null;for(;n.nextNode();){a++;const c=n.currentNode;for(c.previousSibling===h&&(h=null),t.has(c)&&(d.push(c),h===null&&(h=c)),h!==null&&l++;o!==void 0&&o.index===a;)o.index=h!==null?-1:o.index-l,r=Q(i,r),o=i[r]}d.forEach(c=>c.parentNode.removeChild(c))}const ws=s=>{let t=s.nodeType===11?0:1;const e=document.createTreeWalker(s,133,null,!1);for(;e.nextNode();)t++;return t},Q=(s,t=-1)=>{for(let e=t+1;e<s.length;e++){const i=s[e];if(Ue(i))return e}return-1};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Ss=new WeakMap,Z=s=>typeof s=="function"&&Ss.has(s),C={},de={};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */let Tt=class{constructor(t,e,i){this.__parts=[],this.template=t,this.processor=e,this.options=i}update(t){let e=0;for(const i of this.__parts)i!==void 0&&i.setValue(t[e]),e++;for(const i of this.__parts)i!==void 0&&i.commit()}_clone(){const t=oe?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],i=this.template.parts,n=document.createTreeWalker(t,133,null,!1);let r,o=0,a=0,l=n.nextNode();for(;o<i.length;)if(r=i[o],Ue(r)){for(;a<r.index;)a++,l.nodeName==="TEMPLATE"&&(e.push(l),n.currentNode=l.content),(l=n.nextNode())===null&&(n.currentNode=e.pop(),l=n.nextNode());if(r.type==="node"){const d=this.processor.handleTextExpression(this.options);d.insertAfterNode(l.previousSibling),this.__parts.push(d)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,r.name,r.strings,this.options));o++}else this.__parts.push(void 0),o++;return oe&&(document.adoptNode(t),customElements.upgrade(t)),t}};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const he=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:s=>s}),$s=` ${N} `;let Me=class{constructor(t,e,i,n){this.strings=t,this.values=e,this.type=i,this.processor=n}getHTML(){const t=this.strings.length-1;let e="",i=!1;for(let n=0;n<t;n++){const r=this.strings[n],o=r.lastIndexOf("<!--");i=(o>-1||i)&&r.indexOf("-->",o+1)===-1;const a=Et.exec(r);e+=a===null?r+(i?$s:ke):r.substr(0,a.index)+a[1]+a[2]+"$lit$"+a[3]+N}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");let e=this.getHTML();return he!==void 0&&(e=he.createHTML(e)),t.innerHTML=e,t}};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Lt=s=>s===null||!(typeof s=="object"||typeof s=="function"),Nt=s=>Array.isArray(s)||!(!s||!s[Symbol.iterator]);let Oe=class{constructor(t,e,i){this.dirty=!0,this.element=t,this.name=e,this.strings=i,this.parts=[];for(let n=0;n<i.length-1;n++)this.parts[n]=this._createPart()}_createPart(){return new Re(this)}_getValue(){const t=this.strings,e=t.length-1,i=this.parts;if(e===1&&t[0]===""&&t[1]===""){const r=i[0].value;if(typeof r=="symbol")return String(r);if(typeof r=="string"||!Nt(r))return r}let n="";for(let r=0;r<e;r++){n+=t[r];const o=i[r];if(o!==void 0){const a=o.value;if(Lt(a)||!Nt(a))n+=typeof a=="string"?a:String(a);else for(const l of a)n+=typeof l=="string"?l:String(l)}}return n+=t[e],n}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}},Re=class{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===C||Lt(t)&&t===this.value||(this.value=t,Z(t)||(this.committer.dirty=!0))}commit(){for(;Z(this.value);){const t=this.value;this.value=C,t(this)}this.value!==C&&this.committer.commit()}},Be=class Ve{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(M()),this.endNode=t.appendChild(M())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=M()),t.__insert(this.endNode=M())}insertAfterPart(t){t.__insert(this.startNode=M()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(this.startNode.parentNode===null)return;for(;Z(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=C,e(this)}const t=this.__pendingValue;t!==C&&(Lt(t)?t!==this.value&&this.__commitText(t):t instanceof Me?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):Nt(t)?this.__commitIterable(t):t===de?(this.value=de,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,i=typeof(t=t??"")=="string"?t:String(t);e===this.endNode.previousSibling&&e.nodeType===3?e.data=i:this.__commitNode(document.createTextNode(i)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof Tt&&this.value.template===e)this.value.update(t.values);else{const i=new Tt(e,t.processor,this.options),n=i._clone();i.update(t.values),this.__commitNode(n),this.value=i}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let i,n=0;for(const r of t)i=e[n],i===void 0&&(i=new Ve(this.options),e.push(i),n===0?i.appendIntoPart(this):i.insertAfterPart(e[n-1])),i.setValue(r),i.commit(),n++;n<e.length&&(e.length=n,this.clear(i&&i.endNode))}clear(t=this.startNode){Pt(this.startNode.parentNode,t.nextSibling,this.endNode)}},As=class{constructor(t,e,i){if(this.value=void 0,this.__pendingValue=void 0,i.length!==2||i[0]!==""||i[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=i}setValue(t){this.__pendingValue=t}commit(){for(;Z(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=C,e(this)}if(this.__pendingValue===C)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=C}},Cs=class extends Oe{constructor(t,e,i){super(t,e,i),this.single=i.length===2&&i[0]===""&&i[1]===""}_createPart(){return new Ps(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}},Ps=class extends Re{},je=!1;(()=>{try{const s={get capture(){return je=!0,!1}};window.addEventListener("test",s,s),window.removeEventListener("test",s,s)}catch{}})();let Es=class{constructor(t,e,i){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=i,this.__boundHandleEvent=n=>this.handleEvent(n)}setValue(t){this.__pendingValue=t}commit(){for(;Z(this.__pendingValue);){const r=this.__pendingValue;this.__pendingValue=C,r(this)}if(this.__pendingValue===C)return;const t=this.__pendingValue,e=this.value,i=t==null||e!=null&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),n=t!=null&&(e==null||i);i&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),n&&(this.__options=Ts(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=C}handleEvent(t){typeof this.value=="function"?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}};const Ts=s=>s&&(je?{capture:s.capture,passive:s.passive,once:s.once}:s.capture);function Ns(s){let t=X.get(s.type);t===void 0&&(t={stringsArray:new WeakMap,keyString:new Map},X.set(s.type,t));let e=t.stringsArray.get(s.strings);if(e!==void 0)return e;const i=s.strings.join(N);return e=t.keyString.get(i),e===void 0&&(e=new qe(s,s.getTemplateElement()),t.keyString.set(i,e)),t.stringsArray.set(s.strings,e),e}const X=new Map,I=new WeakMap;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const ks=new class{handleAttributeExpressions(s,t,e,i){const n=t[0];return n==="."?new Cs(s,t.slice(1),e).parts:n==="@"?[new Es(s,t.slice(1),i.eventContext)]:n==="?"?[new As(s,t.slice(1),e)]:new Oe(s,t,e).parts}handleTextExpression(s){return new Be(s)}};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */typeof window<"u"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const nt=(s,...t)=>new Me(s,t,"html",ks),Ie=(s,t)=>`${s}--${t}`;let ct=!0;window.ShadyCSS===void 0?ct=!1:window.ShadyCSS.prepareTemplateDom===void 0&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),ct=!1);const qs=s=>t=>{const e=Ie(t.type,s);let i=X.get(e);i===void 0&&(i={stringsArray:new WeakMap,keyString:new Map},X.set(e,i));let n=i.stringsArray.get(t.strings);if(n!==void 0)return n;const r=t.strings.join(N);if(n=i.keyString.get(r),n===void 0){const o=t.getTemplateElement();ct&&window.ShadyCSS.prepareTemplateDom(o,s),n=new qe(t,o),i.keyString.set(r,n)}return i.stringsArray.set(t.strings,n),n},Us=["html","svg"],ze=new Set,Ms=(s,t,e)=>{ze.add(s);const i=e?e.element:document.createElement("template"),n=t.querySelectorAll("style"),{length:r}=n;if(r===0)return void window.ShadyCSS.prepareTemplateStyles(i,s);const o=document.createElement("style");for(let d=0;d<r;d++){const h=n[d];h.parentNode.removeChild(h),o.textContent+=h.textContent}(d=>{Us.forEach(h=>{const c=X.get(Ie(h,d));c!==void 0&&c.keyString.forEach(u=>{const{element:{content:f}}=u,m=new Set;Array.from(f.querySelectorAll("style")).forEach(p=>{m.add(p)}),ce(u,m)})})})(s);const a=i.content;e?function(d,h,c=null){const{element:{content:u},parts:f}=d;if(c==null)return void u.appendChild(h);const m=document.createTreeWalker(u,133,null,!1);let p=Q(f),_=0,y=-1;for(;m.nextNode();)for(y++,m.currentNode===c&&(_=ws(h),c.parentNode.insertBefore(h,c));p!==-1&&f[p].index===y;){if(_>0){for(;p!==-1;)f[p].index+=_,p=Q(f,p);return}p=Q(f,p)}}(e,o,a.firstChild):a.insertBefore(o,a.firstChild),window.ShadyCSS.prepareTemplateStyles(i,s);const l=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&l!==null)t.insertBefore(l.cloneNode(!0),t.firstChild);else if(e){a.insertBefore(o,a.firstChild);const d=new Set;d.add(o),ce(e,d)}};window.JSCompiler_renameProperty=(s,t)=>s;const kt={toAttribute(s,t){switch(t){case Boolean:return s?"":null;case Object:case Array:return s==null?s:JSON.stringify(s)}return s},fromAttribute(s,t){switch(t){case Boolean:return s!==null;case Number:return s===null?null:Number(s);case Object:case Array:return JSON.parse(s)}return s}},Le=(s,t)=>t!==s&&(t==t||s==s),vt={attribute:!0,type:String,converter:kt,reflect:!1,hasChanged:Le};let De=class extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((e,i)=>{const n=this._attributeNameForProperty(i,e);n!==void 0&&(this._attributeToPropertyMap.set(n,i),t.push(n))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;t!==void 0&&t.forEach((e,i)=>this._classProperties.set(i,e))}}static createProperty(t,e=vt){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const i=typeof t=="symbol"?Symbol():`__${t}`,n=this.getPropertyDescriptor(t,i,e);n!==void 0&&Object.defineProperty(this.prototype,t,n)}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(n){const r=this[t];this[e]=n,this.requestUpdateInternal(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||vt}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,i=[...Object.getOwnPropertyNames(e),...typeof Object.getOwnPropertySymbols=="function"?Object.getOwnPropertySymbols(e):[]];for(const n of i)this.createProperty(n,e[n])}}static _attributeNameForProperty(t,e){const i=e.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}static _valueHasChanged(t,e,i=Le){return i(t,e)}static _propertyValueFromAttribute(t,e){const i=e.type,n=e.converter||kt,r=typeof n=="function"?n:n.fromAttribute;return r?r(t,i):t}static _propertyValueToAttribute(t,e){if(e.reflect===void 0)return;const i=e.type,n=e.converter;return(n&&n.toAttribute||kt.toAttribute)(t,i)}initialize(){this._updateState=0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,e)=>{if(this.hasOwnProperty(e)){const i=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,i)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,e)=>this[e]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){this._enableUpdatingResolver!==void 0&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,i){e!==i&&this._attributeToProperty(t,i)}_propertyToAttribute(t,e,i=vt){const n=this.constructor,r=n._attributeNameForProperty(t,i);if(r!==void 0){const o=n._propertyValueToAttribute(e,i);if(o===void 0)return;this._updateState=8|this._updateState,o==null?this.removeAttribute(r):this.setAttribute(r,o),this._updateState=-9&this._updateState}}_attributeToProperty(t,e){if(8&this._updateState)return;const i=this.constructor,n=i._attributeToPropertyMap.get(t);if(n!==void 0){const r=i.getPropertyOptions(n);this._updateState=16|this._updateState,this[n]=i._propertyValueFromAttribute(e,r),this._updateState=-17&this._updateState}}requestUpdateInternal(t,e,i){let n=!0;if(t!==void 0){const r=this.constructor;i=i||r.getPropertyOptions(t),r._valueHasChanged(this[t],e,i.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),i.reflect!==!0||16&this._updateState||(this._reflectingProperties===void 0&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,i))):n=!1}!this._hasRequestedUpdate&&n&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this.requestUpdateInternal(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch{}const t=this.performUpdate();return t!=null&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{t=this.shouldUpdate(e),t?this.update(e):this._markUpdated()}catch(i){throw t=!1,this._markUpdated(),i}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){this._reflectingProperties!==void 0&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,i)=>this._propertyToAttribute(i,this[i],e)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}};De.finalized=!0;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Os=(s,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(e){e.createProperty(t.key,s)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(e){e.createProperty(t.key,s)}};function q(s){return(t,e)=>e!==void 0?((i,n,r)=>{n.constructor.createProperty(r,i)})(s,t,e):Os(s,t)}/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const qt=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Dt=Symbol();let Ut=class{constructor(t,e){if(e!==Dt)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return this._styleSheet===void 0&&(qt?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}};const Rs=(s,...t)=>{const e=t.reduce((i,n,r)=>i+(o=>{if(o instanceof Ut)return o.cssText;if(typeof o=="number")return o;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${o}. Use 'unsafeCSS' to pass non-literal values, but
            take care to ensure page security.`)})(n)+s[r+1],s[0]);return new Ut(e,Dt)};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const ue={};let ot=class extends De{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(Array.isArray(t)){const e=(r,o)=>r.reduceRight((a,l)=>Array.isArray(l)?e(l,a):(a.add(l),a),o),i=e(t,new Set),n=[];i.forEach(r=>n.unshift(r)),this._styles=n}else this._styles=t===void 0?[]:[t];this._styles=this._styles.map(e=>{if(e instanceof CSSStyleSheet&&!qt){const i=Array.prototype.slice.call(e.cssRules).reduce((n,r)=>n+r.cssText,"");return new Ut(String(i),Dt)}return e})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const t=this.constructor._styles;t.length!==0&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow?qt?this.renderRoot.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==ue&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(i=>{const n=document.createElement("style");n.textContent=i.cssText,this.renderRoot.appendChild(n)}))}render(){return ue}};ot.finalized=!0,ot.render=(s,t,e)=>{if(!e||typeof e!="object"||!e.scopeName)throw new Error("The `scopeName` option is required.");const i=e.scopeName,n=I.has(t),r=ct&&t.nodeType===11&&!!t.host,o=r&&!ze.has(i),a=o?document.createDocumentFragment():t;if(((l,d,h)=>{let c=I.get(d);c===void 0&&(Pt(d,d.firstChild),I.set(d,c=new Be(Object.assign({templateFactory:Ns},h))),c.appendInto(d)),c.setValue(l),c.commit()})(s,a,Object.assign({templateFactory:qs(i)},e)),o){const l=I.get(a);I.delete(a);const d=l.value instanceof Tt?l.value.template:void 0;Ms(i,a,d),Pt(t,t.firstChild),t.appendChild(a),I.set(t,l)}!n&&r&&window.ShadyCSS.styleElement(t.host)},ot.shadowRootOptions={mode:"open"};var T=function(s,t,e,i){var n,r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(n=s[a])&&(o=(r<3?n(o):r>3?n(t,e,o):n(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};let E=class extends ot{constructor(){super(...arguments),this.swpath="/pwabuilder-sw.js",this.updateevent="SKIP_WAITING",this.updatemessage="An update for this app is available",this.readyToAsk=!1,this.showStorageEstimate=!1,this.showOfflineToast=!1,this.offlineToastDuration=2400,this.storageUsed=null}static get styles(){return Rs`:host{font-family:sans-serif;--toast-background:#3c3c3c;--button-background:#0b0b0b}#updateToast{position:fixed;bottom:16px;right:16px;background:var(--toast-background);color:#fff;padding:1em;border-radius:4px;display:flex;align-items:center;justify-content:space-between;min-width:22em;max-width:calc(100vw - 16px);font-weight:600;animation-name:fadein;animation-duration:.3s}#storageToast{position:fixed;bottom:16px;right:16px;background:var(--toast-background);color:#fff;padding:1em;border-radius:4px;display:flex;max-width:calc(100vw - 16px);flex-direction:column;align-items:flex-end;font-weight:600}#storageEstimate{font-size:10px;margin-top:8px}#updateToast button{color:#fff;border:none;background:var(--button-background);padding:8px;border-radius:24px;text-transform:lowercase;padding-left:14px;padding-right:14px;font-weight:700}@keyframes fadein{from{opacity:0}to{opacity:1}}`}async firstUpdated(){var s,t;if(this.swpath&&"serviceWorker"in navigator){const e=await navigator.serviceWorker.register(this.swpath);if(e.installing&&navigator.storage){const i=await navigator.storage.estimate();if(i){this.storageUsed=this.formatBytes(i.usage),this.showOfflineToast=!0,await this.updateComplete;const n=(t=(s=this.shadowRoot)===null||s===void 0?void 0:s.querySelector("#storageToast"))===null||t===void 0?void 0:t.animate([{opacity:0},{opacity:1}],{fill:"forwards",duration:280});n&&setTimeout(async()=>{n.onfinish=()=>{this.showOfflineToast=!1},await n.reverse()},this.offlineToastDuration)}}e.onupdatefound=async()=>{let i=e.installing;i&&(i.onstatechange=()=>{(i==null?void 0:i.state)==="installed"&&this.dispatchEvent(new Event("pwaUpdate"))})}}this.setupEvents()}setupEvents(){this.addEventListener("pwaUpdate",async()=>{navigator.serviceWorker&&(this.swreg=await navigator.serviceWorker.getRegistration(),this.swreg&&this.swreg.waiting&&(this.readyToAsk=!0))})}doUpdate(){var s,t;(t=(s=this.swreg)===null||s===void 0?void 0:s.waiting)===null||t===void 0||t.postMessage({type:this.updateevent}),window.location.reload()}formatBytes(s,t=2){if(s===0)return"0 Bytes";const e=t<0?0:t,i=Math.floor(Math.log(s)/Math.log(1024));return parseFloat((s/Math.pow(1024,i)).toFixed(e))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}render(){return nt`<div>${this.readyToAsk?nt`<div id="updateToast" part="updateToast"><span>${this.updatemessage}</span> <button @click="${()=>this.doUpdate()}">Update</button></div>`:null} ${this.showOfflineToast?nt`<div id="storageToast" part="offlineToast">Ready to use Offline ${this.showStorageEstimate?nt`<span id="storageEstimate">Cached ${this.storageUsed}</span>`:null}</div>`:null}</div>`}};var bt;T([q({type:String})],E.prototype,"swpath",void 0),T([q({type:String})],E.prototype,"updateevent",void 0),T([q({type:String})],E.prototype,"updatemessage",void 0),T([q({type:Boolean})],E.prototype,"readyToAsk",void 0),T([q({type:Boolean})],E.prototype,"showStorageEstimate",void 0),T([q({type:Boolean})],E.prototype,"showOfflineToast",void 0),T([q({type:Number})],E.prototype,"offlineToastDuration",void 0),T([q({type:String})],E.prototype,"storageUsed",void 0),E=T([(bt="pwa-update",s=>typeof s=="function"?((t,e)=>(window.customElements.define(t,e),e))(bt,s):((t,e)=>{const{kind:i,elements:n}=e;return{kind:i,elements:n,finisher(r){window.customElements.define(t,r)}}})(bt,s))],E);/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const pe=typeof window<"u"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,Mt=(s,t,e=null)=>{for(;t!==e;){const i=t.nextSibling;s.removeChild(t),t=i}},k=`{{lit-${String(Math.random()).slice(2)}}}`,He=`<!--${k}-->`,fe=new RegExp(`${k}|${He}`);class Fe{constructor(t,e){this.parts=[],this.element=e;const i=[],n=[],r=document.createTreeWalker(e.content,133,null,!1);let o=0,a=-1,l=0;const{strings:d,values:{length:h}}=t;for(;l<h;){const c=r.nextNode();if(c!==null){if(a++,c.nodeType===1){if(c.hasAttributes()){const u=c.attributes,{length:f}=u;let m=0;for(let p=0;p<f;p++)me(u[p].name,"$lit$")&&m++;for(;m-- >0;){const p=d[l],_=Ot.exec(p)[2],y=_.toLowerCase()+"$lit$",$=c.getAttribute(y);c.removeAttribute(y);const v=$.split(fe);this.parts.push({type:"attribute",index:a,name:_,strings:v}),l+=v.length-1}}c.tagName==="TEMPLATE"&&(n.push(c),r.currentNode=c.content)}else if(c.nodeType===3){const u=c.data;if(u.indexOf(k)>=0){const f=c.parentNode,m=u.split(fe),p=m.length-1;for(let _=0;_<p;_++){let y,$=m[_];if($==="")y=O();else{const v=Ot.exec($);v!==null&&me(v[2],"$lit$")&&($=$.slice(0,v.index)+v[1]+v[2].slice(0,-5)+v[3]),y=document.createTextNode($)}f.insertBefore(y,c),this.parts.push({type:"node",index:++a})}m[p]===""?(f.insertBefore(O(),c),i.push(c)):c.data=m[p],l+=p}}else if(c.nodeType===8)if(c.data===k){const u=c.parentNode;c.previousSibling!==null&&a!==o||(a++,u.insertBefore(O(),c)),o=a,this.parts.push({type:"node",index:a}),c.nextSibling===null?c.data="":(i.push(c),a--),l++}else{let u=-1;for(;(u=c.data.indexOf(k,u+1))!==-1;)this.parts.push({type:"node",index:-1}),l++}}else r.currentNode=n.pop()}for(const c of i)c.parentNode.removeChild(c)}}const me=(s,t)=>{const e=s.length-t.length;return e>=0&&s.slice(e)===t},We=s=>s.index!==-1,O=()=>document.createComment(""),Ot=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function _e(s,t){const{element:{content:e},parts:i}=s,n=document.createTreeWalker(e,133,null,!1);let r=K(i),o=i[r],a=-1,l=0;const d=[];let h=null;for(;n.nextNode();){a++;const c=n.currentNode;for(c.previousSibling===h&&(h=null),t.has(c)&&(d.push(c),h===null&&(h=c)),h!==null&&l++;o!==void 0&&o.index===a;)o.index=h!==null?-1:o.index-l,r=K(i,r),o=i[r]}d.forEach(c=>c.parentNode.removeChild(c))}const Bs=s=>{let t=s.nodeType===11?0:1;const e=document.createTreeWalker(s,133,null,!1);for(;e.nextNode();)t++;return t},K=(s,t=-1)=>{for(let e=t+1;e<s.length;e++){const i=s[e];if(We(i))return e}return-1};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Vs=new WeakMap,tt=s=>typeof s=="function"&&Vs.has(s),P={},ge={};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class Rt{constructor(t,e,i){this.__parts=[],this.template=t,this.processor=e,this.options=i}update(t){let e=0;for(const i of this.__parts)i!==void 0&&i.setValue(t[e]),e++;for(const i of this.__parts)i!==void 0&&i.commit()}_clone(){const t=pe?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],i=this.template.parts,n=document.createTreeWalker(t,133,null,!1);let r,o=0,a=0,l=n.nextNode();for(;o<i.length;)if(r=i[o],We(r)){for(;a<r.index;)a++,l.nodeName==="TEMPLATE"&&(e.push(l),n.currentNode=l.content),(l=n.nextNode())===null&&(n.currentNode=e.pop(),l=n.nextNode());if(r.type==="node"){const d=this.processor.handleTextExpression(this.options);d.insertAfterNode(l.previousSibling),this.__parts.push(d)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,r.name,r.strings,this.options));o++}else this.__parts.push(void 0),o++;return pe&&(document.adoptNode(t),customElements.upgrade(t)),t}}/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const js=` ${k} `;class Je{constructor(t,e,i,n){this.strings=t,this.values=e,this.type=i,this.processor=n}getHTML(){const t=this.strings.length-1;let e="",i=!1;for(let n=0;n<t;n++){const r=this.strings[n],o=r.lastIndexOf("<!--");i=(o>-1||i)&&r.indexOf("-->",o+1)===-1;const a=Ot.exec(r);e+=a===null?r+(i?js:He):r.substr(0,a.index)+a[1]+a[2]+"$lit$"+a[3]+k}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Ht=s=>s===null||!(typeof s=="object"||typeof s=="function"),Qe=s=>Array.isArray(s)||!(!s||!s[Symbol.iterator]);class Ke{constructor(t,e,i){this.dirty=!0,this.element=t,this.name=e,this.strings=i,this.parts=[];for(let n=0;n<i.length-1;n++)this.parts[n]=this._createPart()}_createPart(){return new Ge(this)}_getValue(){const t=this.strings,e=t.length-1;let i="";for(let n=0;n<e;n++){i+=t[n];const r=this.parts[n];if(r!==void 0){const o=r.value;if(Ht(o)||!Qe(o))i+=typeof o=="string"?o:String(o);else for(const a of o)i+=typeof a=="string"?a:String(a)}}return i+=t[e],i}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class Ge{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===P||Ht(t)&&t===this.value||(this.value=t,tt(t)||(this.committer.dirty=!0))}commit(){for(;tt(this.value);){const t=this.value;this.value=P,t(this)}this.value!==P&&this.committer.commit()}}class ut{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(O()),this.endNode=t.appendChild(O())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=O()),t.__insert(this.endNode=O())}insertAfterPart(t){t.__insert(this.startNode=O()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(this.startNode.parentNode===null)return;for(;tt(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=P,e(this)}const t=this.__pendingValue;t!==P&&(Ht(t)?t!==this.value&&this.__commitText(t):t instanceof Je?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):Qe(t)?this.__commitIterable(t):t===ge?(this.value=ge,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,i=typeof(t=t??"")=="string"?t:String(t);e===this.endNode.previousSibling&&e.nodeType===3?e.data=i:this.__commitNode(document.createTextNode(i)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof Rt&&this.value.template===e)this.value.update(t.values);else{const i=new Rt(e,t.processor,this.options),n=i._clone();i.update(t.values),this.__commitNode(n),this.value=i}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let i,n=0;for(const r of t)i=e[n],i===void 0&&(i=new ut(this.options),e.push(i),n===0?i.appendIntoPart(this):i.insertAfterPart(e[n-1])),i.setValue(r),i.commit(),n++;n<e.length&&(e.length=n,this.clear(i&&i.endNode))}clear(t=this.startNode){Mt(this.startNode.parentNode,t.nextSibling,this.endNode)}}class Is{constructor(t,e,i){if(this.value=void 0,this.__pendingValue=void 0,i.length!==2||i[0]!==""||i[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=i}setValue(t){this.__pendingValue=t}commit(){for(;tt(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=P,e(this)}if(this.__pendingValue===P)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=P}}class zs extends Ke{constructor(t,e,i){super(t,e,i),this.single=i.length===2&&i[0]===""&&i[1]===""}_createPart(){return new Ls(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class Ls extends Ge{}let Ye=!1;(()=>{try{const s={get capture(){return Ye=!0,!1}};window.addEventListener("test",s,s),window.removeEventListener("test",s,s)}catch{}})();class Ds{constructor(t,e,i){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=i,this.__boundHandleEvent=n=>this.handleEvent(n)}setValue(t){this.__pendingValue=t}commit(){for(;tt(this.__pendingValue);){const r=this.__pendingValue;this.__pendingValue=P,r(this)}if(this.__pendingValue===P)return;const t=this.__pendingValue,e=this.value,i=t==null||e!=null&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),n=t!=null&&(e==null||i);i&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),n&&(this.__options=Hs(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=P}handleEvent(t){typeof this.value=="function"?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const Hs=s=>s&&(Ye?{capture:s.capture,passive:s.passive,once:s.once}:s.capture);function Fs(s){let t=et.get(s.type);t===void 0&&(t={stringsArray:new WeakMap,keyString:new Map},et.set(s.type,t));let e=t.stringsArray.get(s.strings);if(e!==void 0)return e;const i=s.strings.join(k);return e=t.keyString.get(i),e===void 0&&(e=new Fe(s,s.getTemplateElement()),t.keyString.set(i,e)),t.stringsArray.set(s.strings,e),e}const et=new Map,z=new WeakMap;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Ws=new class{handleAttributeExpressions(s,t,e,i){const n=t[0];return n==="."?new zs(s,t.slice(1),e).parts:n==="@"?[new Ds(s,t.slice(1),i.eventContext)]:n==="?"?[new Is(s,t.slice(1),e)]:new Ke(s,t,e).parts}handleTextExpression(s){return new ut(s)}};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */typeof window<"u"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const A=(s,...t)=>new Je(s,t,"html",Ws),Ze=(s,t)=>`${s}--${t}`;let dt=!0;window.ShadyCSS===void 0?dt=!1:window.ShadyCSS.prepareTemplateDom===void 0&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),dt=!1);const Js=s=>t=>{const e=Ze(t.type,s);let i=et.get(e);i===void 0&&(i={stringsArray:new WeakMap,keyString:new Map},et.set(e,i));let n=i.stringsArray.get(t.strings);if(n!==void 0)return n;const r=t.strings.join(k);if(n=i.keyString.get(r),n===void 0){const o=t.getTemplateElement();dt&&window.ShadyCSS.prepareTemplateDom(o,s),n=new Fe(t,o),i.keyString.set(r,n)}return i.stringsArray.set(t.strings,n),n},Qs=["html","svg"],Xe=new Set,Ks=(s,t,e)=>{Xe.add(s);const i=e?e.element:document.createElement("template"),n=t.querySelectorAll("style"),{length:r}=n;if(r===0)return void window.ShadyCSS.prepareTemplateStyles(i,s);const o=document.createElement("style");for(let d=0;d<r;d++){const h=n[d];h.parentNode.removeChild(h),o.textContent+=h.textContent}(d=>{Qs.forEach(h=>{const c=et.get(Ze(h,d));c!==void 0&&c.keyString.forEach(u=>{const{element:{content:f}}=u,m=new Set;Array.from(f.querySelectorAll("style")).forEach(p=>{m.add(p)}),_e(u,m)})})})(s);const a=i.content;e?function(d,h,c=null){const{element:{content:u},parts:f}=d;if(c==null)return void u.appendChild(h);const m=document.createTreeWalker(u,133,null,!1);let p=K(f),_=0,y=-1;for(;m.nextNode();)for(y++,m.currentNode===c&&(_=Bs(h),c.parentNode.insertBefore(h,c));p!==-1&&f[p].index===y;){if(_>0){for(;p!==-1;)f[p].index+=_,p=K(f,p);return}p=K(f,p)}}(e,o,a.firstChild):a.insertBefore(o,a.firstChild),window.ShadyCSS.prepareTemplateStyles(i,s);const l=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&l!==null)t.insertBefore(l.cloneNode(!0),t.firstChild);else if(e){a.insertBefore(o,a.firstChild);const d=new Set;d.add(o),_e(e,d)}};window.JSCompiler_renameProperty=(s,t)=>s;const Bt={toAttribute(s,t){switch(t){case Boolean:return s?"":null;case Object:case Array:return s==null?s:JSON.stringify(s)}return s},fromAttribute(s,t){switch(t){case Boolean:return s!==null;case Number:return s===null?null:Number(s);case Object:case Array:return JSON.parse(s)}return s}},ti=(s,t)=>t!==s&&(t==t||s==s),xt={attribute:!0,type:String,converter:Bt,reflect:!1,hasChanged:ti};class ei extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((e,i)=>{const n=this._attributeNameForProperty(i,e);n!==void 0&&(this._attributeToPropertyMap.set(n,i),t.push(n))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;t!==void 0&&t.forEach((e,i)=>this._classProperties.set(i,e))}}static createProperty(t,e=xt){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const i=typeof t=="symbol"?Symbol():"__"+t,n=this.getPropertyDescriptor(t,i,e);n!==void 0&&Object.defineProperty(this.prototype,t,n)}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(n){const r=this[t];this[e]=n,this._requestUpdate(t,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||xt}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,i=[...Object.getOwnPropertyNames(e),...typeof Object.getOwnPropertySymbols=="function"?Object.getOwnPropertySymbols(e):[]];for(const n of i)this.createProperty(n,e[n])}}static _attributeNameForProperty(t,e){const i=e.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}static _valueHasChanged(t,e,i=ti){return i(t,e)}static _propertyValueFromAttribute(t,e){const i=e.type,n=e.converter||Bt,r=typeof n=="function"?n:n.fromAttribute;return r?r(t,i):t}static _propertyValueToAttribute(t,e){if(e.reflect===void 0)return;const i=e.type,n=e.converter;return(n&&n.toAttribute||Bt.toAttribute)(t,i)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,e)=>{if(this.hasOwnProperty(e)){const i=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,i)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,e)=>this[e]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){this._enableUpdatingResolver!==void 0&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,i){e!==i&&this._attributeToProperty(t,i)}_propertyToAttribute(t,e,i=xt){const n=this.constructor,r=n._attributeNameForProperty(t,i);if(r!==void 0){const o=n._propertyValueToAttribute(e,i);if(o===void 0)return;this._updateState=8|this._updateState,o==null?this.removeAttribute(r):this.setAttribute(r,o),this._updateState=-9&this._updateState}}_attributeToProperty(t,e){if(8&this._updateState)return;const i=this.constructor,n=i._attributeToPropertyMap.get(t);if(n!==void 0){const r=i.getPropertyOptions(n);this._updateState=16|this._updateState,this[n]=i._propertyValueFromAttribute(e,r),this._updateState=-17&this._updateState}}_requestUpdate(t,e){let i=!0;if(t!==void 0){const n=this.constructor,r=n.getPropertyOptions(t);n._valueHasChanged(this[t],e,r.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),r.reflect!==!0||16&this._updateState||(this._reflectingProperties===void 0&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,r))):i=!1}!this._hasRequestedUpdate&&i&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this._requestUpdate(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch{}const t=this.performUpdate();return t!=null&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{t=this.shouldUpdate(e),t?this.update(e):this._markUpdated()}catch(i){throw t=!1,this._markUpdated(),i}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){this._reflectingProperties!==void 0&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,i)=>this._propertyToAttribute(i,this[i],e)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}ei.finalized=!0;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Gs=(s,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(e){e.createProperty(t.key,s)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(e){e.createProperty(t.key,s)}};function x(s){return(t,e)=>e!==void 0?((i,n,r)=>{n.constructor.createProperty(r,i)})(s,t,e):Gs(s,t)}/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const ii="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,si=Symbol();class ye{constructor(t,e){if(e!==si)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return this._styleSheet===void 0&&(ii?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const Ys=(s,...t)=>{const e=t.reduce((i,n,r)=>i+(o=>{if(o instanceof ye)return o.cssText;if(typeof o=="number")return o;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${o}. Use 'unsafeCSS' to pass non-literal values, but
            take care to ensure page security.`)})(n)+s[r+1],s[0]);return new ye(e,si)};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");const ve={};class Vt extends ei{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(t===void 0)this._styles=[];else if(Array.isArray(t)){const e=(r,o)=>r.reduceRight((a,l)=>Array.isArray(l)?e(l,a):(a.add(l),a),o),i=e(t,new Set),n=[];i.forEach(r=>n.unshift(r)),this._styles=n}else this._styles=[t]}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;t.length!==0&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow?ii?this.renderRoot.adoptedStyleSheets=t.map(e=>e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==ve&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(i=>{const n=document.createElement("style");n.textContent=i.cssText,this.renderRoot.appendChild(n)}))}render(){return ve}}Vt.finalized=!0,Vt.render=(s,t,e)=>{if(!e||typeof e!="object"||!e.scopeName)throw new Error("The `scopeName` option is required.");const i=e.scopeName,n=z.has(t),r=dt&&t.nodeType===11&&!!t.host,o=r&&!Xe.has(i),a=o?document.createDocumentFragment():t;if(((l,d,h)=>{let c=z.get(d);c===void 0&&(Mt(d,d.firstChild),z.set(d,c=new ut(Object.assign({templateFactory:Fs},h))),c.appendInto(d)),c.setValue(l),c.commit()})(s,a,Object.assign({templateFactory:Js(i)},e)),o){const l=z.get(a);z.delete(a);const d=l.value instanceof Rt?l.value.template:void 0;Ks(i,a,d),Mt(t,t.firstChild),t.appendChild(a),z.set(t,l)}!n&&r&&window.ShadyCSS.styleElement(t.host)};var b=function(s,t,e,i){var n,r=arguments.length,o=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(n=s[a])&&(o=(r<3?n(o):r>3?n(t,e,o):n(t,e))||o);return r>3&&o&&Object.defineProperty(t,e,o),o};let g=class extends Vt{constructor(){super(),this.manifestpath="manifest.json",this.openmodal=!1,this.hasprompt=!1,this.relatedApps=[],this.explainer="This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. ",this.featuresheader="Key Features",this.descriptionheader="Description",this.installbuttontext="Install",this.cancelbuttontext="Cancel",this.iosinstallinfotext="Tap the share button and then 'Add to Homescreen'",this.isSupportingBrowser=window.hasOwnProperty("BeforeInstallPromptEvent"),this.isIOS=navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")||navigator.userAgent.includes("Macintosh")&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,this.installed=!1,window.addEventListener("beforeinstallprompt",s=>this.handleInstallPromptEvent(s)),document.addEventListener("keyup",s=>{s.key==="Escape"&&this.cancel()})}static get styles(){return Ys`:host{--install-focus-color:#919c9c;--install-button-color:#0078d4;--modal-z-index:9999;--background-z-index:9998;--modal-background-color:white}button{outline:0}#installModalWrapper{height:100vh;width:100vw;overflow:auto;position:fixed;bottom:0;top:0;left:0;right:0;z-index:var(--modal-z-index);display:flex;justify-content:center;align-items:center}#descriptionWrapper{margin-bottom:3em}#installModal{position:absolute;background:var(--modal-background-color);font-family:sans-serif;box-shadow:0 25px 26px rgba(32,36,50,.25),0 5px 9px rgba(51,58,83,.53);border-radius:10px;display:flex;flex-direction:column;padding:0;animation-name:opened;animation-duration:150ms;z-index:var(--modal-z-index);max-width:56em}@keyframes opened{from{transform:scale(.8,.8);opacity:.4}to{transform:scale(1,1);opacity:1}}@keyframes mobile{from{opacity:.6}to{opacity:1}}@keyframes fadein{from{opacity:.2}to{opacity:1}}#background{position:fixed;top:0;bottom:0;left:0;right:0;background:#e3e3e3b0;backdrop-filter:blur(5px);z-index:var(--background-z-index);animation-name:fadein;animation-duration:250ms}#headerContainer{display:flex;justify-content:space-between;margin:40px;margin-bottom:32px}#headerContainer h1{font-size:34px;color:#3c3c3c;margin-top:20px;margin-bottom:7px}#headerContainer img{height:122px;width:122px;background:#d3d3d3;border-radius:10px;padding:12px;border-radius:24px;margin-right:24px}#buttonsContainer{display:flex;justify-content:flex-end;position:relative;height:100px;background:#dedede75;width:100%;right:0;border-radius:0 0 12px 12px}#installButton,#installCancelButton,#openButton{text-align:center;align-content:center;align-self:center;vertical-align:middle;justify-self:flex-end;line-height:200%;flex:0 0 auto;display:inline-block;background:#0078d4;color:#fff;cursor:pointer;border:solid 1px transparent;outline:0}#openButton{background:var(--install-button-color)}#openButton:focus{outline:auto;outline:-webkit-focus-ring-color auto 1px}#installButton,#installCancelButton{min-width:130px;margin-right:30px;background:var(--install-button-color);border-radius:20px;font-weight:600;font-size:14px;line-height:21px;padding-top:10px;padding-bottom:9px;padding-left:20px;padding-right:20px;outline:0;color:#fff}#closeButton{background:0 0;border:none;color:#000;padding-left:12px;padding-right:12px;padding-top:4px;padding-bottom:4px;border-radius:20px;font-weight:600;outline:0;cursor:pointer;align-self:self-end}#closeButton:focus,#installButton:focus,#installCancelButton:focus{box-shadow:0 0 0 3px var(--install-focus-color)}#contentContainer{margin-left:40px;margin-right:40px;flex:1}#contentContainer h3{font-size:22px;color:#3c3c3c;margin-bottom:12px}#contentContainer p{font-size:14px;color:#3c3c3c}#featuresScreenDiv{display:flex;justify-content:space-around;align-items:center;margin-right:20px}#featuresScreenDiv h3{font-style:normal;font-weight:600;font-size:22px;line-height:225%;margin-top:0}#keyFeatures{overflow:hidden;padding-right:2em}#keyFeatures ul{padding-inline-start:22px;margin-block-start:12px}#featuresScreenDiv #keyFeatures li{font-style:normal;font-weight:600;font-size:16px;line-height:29px;color:rgba(51,51,51,.72)}#screenshotsContainer{max-height:220px;display:flex;max-width:30em}#screenshotsContainer button{border:none;width:4em;transition:background-color .2s}#screenshotsContainer button:focus,#screenshotsContainer button:hover{background-color:#bbb}#screenshotsContainer button svg{width:28px;fill:#6b6969}#screenshots{display:flex;scroll-snap-type:x mandatory;flex-wrap:wrap;flex-direction:column;overflow-x:scroll;width:22em;max-height:220px;-webkit-overflow-scrolling:touch}#screenshots div{display:flex;align-items:center;justify-content:center;scroll-snap-align:start;height:14em;width:100%;background:#efefef}#screenshots img{height:100%;object-fit:contain}#screenshots::-webkit-scrollbar{display:none}#tagsDiv{margin-top:1em;margin-bottom:1em}#desc{width:100%;max-width:40em;font-size:14px;color:#7e7e7e;text-overflow:ellipsis;overflow:hidden}#logoContainer{display:flex}#tagsDiv span{background:grey;color:#fff;padding-left:12px;padding-right:12px;padding-bottom:4px;font-weight:700;border-radius:24px;margin-right:12px;padding-top:1px}#iosText{color:var(--install-button-color);text-align:center;font-weight:700;position:fixed;bottom:0;left:0;right:0;backdrop-filter:blur(10px);background:rgba(239,239,239,.17);margin:0;padding:2em}#manifest-description{white-space:pre-wrap}@media (max-height:780px){#buttonsContainer{height:70px;background:0 0}}@media (max-width:1220px){#installModal{margin:0;border-radius:0;min-height:100%;width:100%;animation-name:mobile;animation-duration:250ms}#screenshots{justify-content:center}}@media (max-width:962px){#headerContainer h1{margin-top:0;margin-bottom:0}#logoContainer{align-items:center}#desc{display:none}#headerContainer{margin-bottom:24px}#headerContainer img{height:42px;width:42px}}@media (max-width:800px){#background{display:none}#installModal{overflow:scroll;box-shadow:none;max-width:100%;height:100%}#screenshotsContainer{width:100%}#screenshots img{height:180px}#buttonsContainer{display:flex;justify-content:center;bottom:0;margin-bottom:0;border-radius:0;padding-top:1em;padding-bottom:1em}#buttonsContainer #installButton{margin-right:0}#featuresScreenDiv{flex-direction:column;align-items:flex-start;margin-right:0}#headerContainer{margin:20px}#desc{display:none}#contentContainer{margin-left:20px;margin-right:20px;margin-bottom:5em}#headerContainer img{height:60px;width:60px;margin-right:12px}#buttonsContainer{position:fixed;bottom:0;background:#efefef2b;backdrop-filter:blur(10px)}}@media (max-width:400px){#headerContainer h1{font-size:26px}#headerContainer img{height:40px;width:40px}#featuresScreenDiv h3{font-size:18px;margin-bottom:0}#keyFeatures ul{margin-top:0}}@media all and (display-mode:standalone){button{display:none}}@media (prefers-color-scheme:dark){:host{--modal-background-color:black}#featuresScreenDiv #keyFeatures li,#installModal h1,#installModal h2,#installModal h3,#installModal p{color:#fff}#closeButton svg path{fill:#fff;opacity:1}#buttonsContainer{background:rgb(36 36 36)}}@media (inverted-colors:inverted){:host{--install-focus-color:#6e6363;--install-button-color:#ff872b;--modal-background-color:black}#featuresScreenDiv #keyFeatures li,#installModal h1,#installModal h2,#installModal h3,#installModal p{color:#fff}#closeButton svg path{fill:#fff;opacity:1}#buttonsContainer{background:rgb(36 36 36)}}`}async firstUpdated(){if(this.manifestpath)try{await this.getManifestData()}catch{console.error("Error getting manifest, check that you have a valid web manifest")}"getInstalledRelatedApps"in navigator&&(this.relatedApps=await navigator.getInstalledRelatedApps())}handleInstallPromptEvent(s){this.deferredprompt=s,this.hasprompt=!0,s.preventDefault()}checkManifest(s){s.icons&&s.icons[0]?s.name?s.description||console.error("Your web manifest must have a description listed"):console.error("Your web manifest must have a name listed"):console.error("Your web manifest must have atleast one icon listed")}async getManifestData(){try{const s=await fetch(this.manifestpath),t=await s.json();if(this.manifestdata=t,this.manifestdata)return this.checkManifest(this.manifestdata),t}catch{return null}}scrollToLeft(){const s=this.shadowRoot.querySelector("#screenshots");s.scrollBy({left:-s.clientWidth,top:0,behavior:"smooth"})}scrollToRight(){const s=this.shadowRoot.querySelector("#screenshots");s.scrollBy({left:s.clientWidth,top:0,behavior:"smooth"})}openPrompt(){this.openmodal=!0;let s=new CustomEvent("show");this.dispatchEvent(s)}closePrompt(){this.openmodal=!1;let s=new CustomEvent("hide");this.dispatchEvent(s)}shouldShowInstall(){return this.isSupportingBrowser&&this.relatedApps.length<1&&(this.hasprompt||this.isIOS)}async install(){if(this.deferredprompt){this.deferredprompt.prompt();let s=new CustomEvent("show");if(this.dispatchEvent(s),(await this.deferredprompt.userChoice).outcome==="accepted"){await this.cancel(),this.installed=!0;let t=new CustomEvent("hide");return this.dispatchEvent(t),!0}{await this.cancel(),this.installed=!0;let t=new CustomEvent("hide");return this.dispatchEvent(t),!1}}}getInstalledStatus(){return navigator.standalone?navigator.standalone:!!matchMedia("(display-mode: standalone)").matches}cancel(){return new Promise((s,t)=>{this.openmodal=!1,this.hasAttribute("openmodal")&&this.removeAttribute("openmodal");let e=new CustomEvent("hide");this.dispatchEvent(e),s()})}render(){return A`${"standalone"in navigator&&navigator.standalone===!1||this.usecustom!==!0&&this.shouldShowInstall()&&this.installed===!1?A`<button part="openButton" id="openButton" @click="${()=>this.openPrompt()}"><slot>${this.installbuttontext}</slot></button>`:null} ${this.openmodal===!0?A`<div id="installModalWrapper">${this.openmodal?A`<div id="background" @click="${()=>this.cancel()}"></div>`:null}<div id="installModal" part="installModal"><div id="headerContainer"><div id="logoContainer"><img src="${this.iconpath?this.iconpath:this.manifestdata.icons[0].src}" alt="App Logo"><div id="installTitle"><h1>${this.manifestdata.short_name||this.manifestdata.name}</h1><p id="desc">${this.explainer}</p></div></div><button id="closeButton" @click="${()=>this.cancel()}" aria-label="Close"><svg width="23" height="22" viewBox="0 0 23 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.33" fill-rule="evenodd" clip-rule="evenodd" d="M1.11932 0.357981C1.59693 -0.119327 2.37129 -0.119327 2.8489 0.357981L11.7681 9.27152L20.6873 0.357981C21.165 -0.119327 21.9393 -0.119327 22.4169 0.357981C22.8945 0.835288 22.8945 1.60916 22.4169 2.08646L13.4977 11L22.4169 19.9135C22.8945 20.3908 22.8945 21.1647 22.4169 21.642C21.9393 22.1193 21.165 22.1193 20.6873 21.642L11.7681 12.7285L2.8489 21.642C2.37129 22.1193 1.59693 22.1193 1.11932 21.642C0.641705 21.1647 0.641705 20.3908 1.11932 19.9135L10.0385 11L1.11932 2.08646C0.641705 1.60916 0.641705 0.835288 1.11932 0.357981Z" fill="#60656D"/></svg></button></div><div id="contentContainer"><div id="featuresScreenDiv">${this.manifestdata.features?A`<div id="keyFeatures"><h3>${this.featuresheader}</h3><ul>${this.manifestdata.features?this.manifestdata.features.map(s=>A`<li>${s}</li>`):null}</ul></div>`:null} ${this.manifestdata.screenshots?A`<div id="screenshotsContainer"><button @click="${()=>this.scrollToLeft()}" aria-label="previous image"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M401.4 224h-214l83-79.4c11.9-12.5 11.9-32.7 0-45.2s-31.2-12.5-43.2 0L89 233.4c-6 5.8-9 13.7-9 22.4v.4c0 8.7 3 16.6 9 22.4l138.1 134c12 12.5 31.3 12.5 43.2 0 11.9-12.5 11.9-32.7 0-45.2l-83-79.4h214c16.9 0 30.6-14.3 30.6-32 .1-18-13.6-32-30.5-32z"/></svg></button><section id="screenshots">${this.manifestdata.screenshots.map(s=>A`<div><img alt="App Screenshot" src="${s.src}"></div>`)}</section><button @click="${()=>this.scrollToRight()}" aria-label="next image"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M284.9 412.6l138.1-134c6-5.8 9-13.7 9-22.4v-.4c0-8.7-3-16.6-9-22.4l-138.1-134c-12-12.5-31.3-12.5-43.2 0-11.9 12.5-11.9 32.7 0 45.2l83 79.4h-214c-17 0-30.7 14.3-30.7 32 0 18 13.7 32 30.6 32h214l-83 79.4c-11.9 12.5-11.9 32.7 0 45.2 12 12.5 31.3 12.5 43.3 0z"/></svg></button></div>`:null}</div><div id="descriptionWrapper"><h3>${this.descriptionheader}</h3><p id="manifest-description">${this.manifestdata.description}</p></div></div>${this.isIOS?A`<p id="iosText">${this.iosinstallinfotext}</p>`:A`<div id="buttonsContainer">${this.deferredprompt?A`<button id="installButton" @click="${()=>this.install()}">${this.installbuttontext} ${this.manifestdata.short_name}</button>`:A`<button @click="${()=>this.cancel()}" id="installCancelButton">${this.cancelbuttontext}</button>`}</div>`}</div></div>`:null}`}};var wt;b([x({type:String})],g.prototype,"manifestpath",void 0),b([x({type:String})],g.prototype,"iconpath",void 0),b([x({type:Object})],g.prototype,"manifestdata",void 0),b([x({type:Boolean})],g.prototype,"openmodal",void 0),b([x({type:Boolean})],g.prototype,"showopen",void 0),b([x({type:Boolean})],g.prototype,"isSupportingBrowser",void 0),b([x({type:Boolean})],g.prototype,"isIOS",void 0),b([x({type:Boolean})],g.prototype,"installed",void 0),b([x({type:Boolean})],g.prototype,"hasprompt",void 0),b([x({type:Boolean})],g.prototype,"usecustom",void 0),b([x({type:Array})],g.prototype,"relatedApps",void 0),b([x({type:String})],g.prototype,"explainer",void 0),b([x({type:String})],g.prototype,"featuresheader",void 0),b([x({type:String})],g.prototype,"descriptionheader",void 0),b([x({type:String})],g.prototype,"installbuttontext",void 0),b([x({type:String})],g.prototype,"cancelbuttontext",void 0),b([x({type:String})],g.prototype,"iosinstallinfotext",void 0),b([x()],g.prototype,"deferredprompt",void 0),g=b([(wt="pwa-install",s=>typeof s=="function"?((t,e)=>(window.customElements.define(t,e),e))(wt,s):((t,e)=>{const{kind:i,elements:n}=e;return{kind:i,elements:n,finisher(r){window.customElements.define(t,r)}}})(wt,s))],g);class Zs extends J{constructor(){super();it(this,"clientMqtt");it(this,"values");it(this,"clientId",null);console.log("constructor",4),this.hasConnection=!1,this.hasDeviceConnection=!1}static get properties(){return{hasConnection:{type:Boolean},hasDeviceConnection:{type:Boolean}}}async connMqtt(){var i;if(localStorage.getItem("mqttClientId"))this.clientId=localStorage.getItem("mqttClientId");else{let n=((i=navigator==null?void 0:navigator.userAgentData)==null?void 0:i.platform)||(navigator==null?void 0:navigator.platform)||"unown";this.clientId=n+"_"+Math.random().toString(16).substr(2,8),localStorage.setItem("mqttClientId",this.clientId)}console.log("connMqtt","ClientID",this.clientId);let e=this;this.clientMqtt=xs().with_websock("wss://"+this.values.mqttHost).with_autoreconnect(2e3),this.clientMqtt.with({on_live:(n,r)=>{e.cb_on_live()},on_disconnect:(n,r)=>{r||e.cb_on_disconnect()},on_reconnect:n=>{e.cb_reconnect()}}),await this.clientMqtt.connect({client_id:this.clientId,username:this.values.mqttUsername,password:this.values.mqttPassword})}cb_on_disconnect(){console.log("cb_on_disconnect","disconnected"),this.hasConnection=!1,this.hasDeviceConnection=!1}cb_reconnect(){console.log("cb_reconnect","reconnected"),this.hasConnection=!0}cb_error(){this.hasConnection=!1,this.hasDeviceConnection=!1,console.log("cb_error","errored")}cb_on_live(){this.hasConnection=!0,console.log("cb_on_live","Connected"),this.clientMqtt.send("hello",this.clientId),this.clientMqtt.subscribe_topic("hello",(e,i,n)=>{this.cb_subscribe_hello(e,i,n)})}cb_subscribe_hello(e,i,n){var r=new TextDecoder().decode(e.payload);r!=this.clientId&&(this.hasDeviceConnection=!0)}async _onClick2(){await this.clientMqtt.send(this.values.mqttTopicAbrir,this.values.mqttPayload),console.log("_onClick2","Cliquei"),alert("Portão accionado"),this.renderRoot.querySelector("#mqttButton").toggleAttribute("disabled",!0),setTimeout(()=>{this.renderRoot.querySelector("#mqttButton").toggleAttribute("disabled"),console.log("_onClick2","Ativei")},2*1e3)}async firstUpdated(){await this.fetchData()}async fetchData(){let e;e=await fetch("./json_profiles/quinta_azevinho.json").then(i=>i.json()),e!=null&&(this.values=e,this.requestUpdate(),console.log("fetchData","Fetched Json"),this.connMqtt())}static get styles(){return ai`
      :host {
        max-width: 1280px;
        margin: 0 auto;
        padding: 2rem;
        text-align: center;
      }

      .logo {
        height: 23vh;
        border-radius: 32px;
        border: 2px solid transparent;
        padding: 1.5em;
        will-change: filter;
        transition: filter 300ms;
      }
      .logo:hover {
        filter: drop-shadow(0 0 2em #646cffaa);
      }

      .card {
        padding: 2em;
      }

      a {
        font-weight: 500;
        color: #646cff;
        text-decoration: inherit;
      }
      a:hover {
        color: #535bf2;
      }

      button {
        border-radius: 8px;
        border: 1px solid transparent;
        padding: 0.6em 1.2em;
        font-size: 2em;
        font-weight: 500;
        font-family: inherit;
        background-color: #1a1a1a;
        cursor: pointer;
        transition: border-color 0.25s;
      }
      button:hover {
        border-color: #646cff;
      }
      button:focus,
      button:focus-visible {
        outline: 4px auto -webkit-focus-ring-color;
      }

      @media (prefers-color-scheme: light) {
        a:hover {
          color: #747bff;
        }
        button {
          background-color: #f9f9f9;
        }
      }
    `}headerTemplate(){return B`<header>${this.article.title}</header>`}bodyTemplate(){return this.values==null?B`loading`:B`
    <p style="font-size:2em">
      ${this.values.appPerfil.nome}
    </p>
    <div>
      <img src="${this.values.appPerfil.imagem}" alt="Logo" class="logo"></img>
    </div>
    <div class="card">
      <button id="mqttButton" @click=${this._onClick2} part="button">
      🚪 Abrir Portão 
      </button>
    </div>
    <pwa-install manifestpath="manifest.webmanifest"></pwa-install>
    <pwa-update swpath="sw.js"></pwa-update>
    `}footerTemplate(){return B`
    <footer>
      <p id="hasConnection">${this.hasConnection?B`🟢`:"🔴"} | ${this.hasDeviceConnection?B`🟢`:"🔴"}</p>
      <p>Versão:${4}</p>
    </footer>`}render(){return B`
      ${this.bodyTemplate()}
      ${this.footerTemplate()}
    `}}window.customElements.define("my-app",Zs);
